

## list

## pubsub



## Stream

#### xread

xread count[最大数量] block [阻塞时长] streams key [队列名] id[起始id]



#### xadd

xadd	 key    [nomakeStream] 【 MaxLen  minID】  *【id】  [发送的消息，多个key-value键值对]



阻塞获得最新消息：xread count x block 20000 streams user $  

等待20秒，直到获得x条最新消息

**xread阻塞读取只能在读取活动开始后发送消息才可以接收，而不是直接读取最后添加的消息**

### 消费者组

将多个消费者放到一个组里，监听同一个MQ。

可以实现：消息分流，消息标识，消息确认

创建消费者组

xgroup create key（队列名） groupName ID($latest , 0 first) [makeStream] (队列不存在创建队列)

删除消费者组

xgroup destory  key  groupName

指定组添加消费者

xgroup  createConsumer   key  groupName  consumerName

删除消费者组中指定消费者

xgroup delConsumer key groupName consumer



**从消费者中读取消息**

xreadGroup Group   groupName  consumerName  count x  Block [millisec]  [NoACK]   Streams  key...   ID...

NOACK：无需手动确认，收到消息后自动确认

ID：获得消息的起始ID，> 从下一个未消费的消息开始